<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicon_package_v0.16/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon_package_v0.16/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon_package_v0.16/favicon-16x16.png">
  <link rel="manifest" href="/assets/favicon_package_v0.16/site.webmanifest">
  <link rel="mask-icon" href="/assets/favicon_package_v0.16/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <!-- Bootstrap theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css" />
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <title>Login / SignUp</title>
  <link rel="stylesheet" href="../css/login.css" />
</head>

<body>
    <div class="navbar-header">
      <a href="../../index.html">
        <img class="close-icon" src="../images/close.png" alt="Close" />
      </a>
      
      <h1>
        Hey !! Welcome to SwapReads . Please get yourself Registered or verify
        your credentials to get started.
      </p>
    </div>
  <br/>
    <div class="main">
      <input type="checkbox" id="chk" aria-hidden="true" />

      <div class="login">
        <form class="form">
          <label for="chk" aria-hidden="true">Log in</label>
          <input class="input" type="email" name="email" id="login_email" placeholder="Email" required="" />
          <input class="input" type="password" name="pswd" id="login_password" placeholder="Password" required="" />
          <button type="button" name="Login" id="login" onclick="openPopup()">Log in</button>
          <div class="popup" id="popup">
            <img src="404-tick.png">
            <h2>Thank You!</h2>
            <p>Your details have been successfully submitted.</p>
            <button type="button" onclick="closePopup()">Ok</button>
          </div>
          <script>
            let popup=document.getElementById("popup");
            function openPopup(){
                popup.classList.add("open-popup")
            }
            function closePopup(){
                popup.classList.remove("open-popup")
            }
        </script>
          <p class="forget-password">
            Forgot Password?
            <a href="#" id="forgot_password_link">Reset Here</a>
          </p>
        </form>
      </div>

      <div class="register">
        <form class="form">
          <label for="chk" aria-hidden="true">Register</label>
          <!-- <input class="input" type="text" name="txt" placeholder="Username" required=""> -->
          <input class="input" type="email" name="email" id="email" placeholder="Email" required="" />
          <input class="input" type="password" name="pswd" id="password" placeholder="Password" required="" />
          <button type="button" name="register" id="register" onclick="openPopup()">
            Register
          </button>
        </form>
      </div>
    </div>
  </div>
  <footer class="footer">
    <div class="container">
      <div class="footer-bottom">
        <hr style="border-top: 1px solid #979797; margin-left: 8%; margin-right: 8%;">
        <p class="copyright">
          &copy; 2024 All right reserved. Made with ‚ù§ by Guardian Hackers.
        </p>
      </div>
    </div>
  </footer>
</body>
<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.8.1/firebase-app.js';
  import { getAnalytics } from 'https://www.gstatic.com/firebasejs/10.8.1/firebase-analytics.js';
  import {
    getAuth,
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    sendPasswordResetEmail,
    signOut,
  } from 'https://www.gstatic.com/firebasejs/10.8.1/firebase-auth.js';

  //const credential = EmailAuthProvider.credential(email, password);
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: 'AIzaSyCu2WXknNce_49J5BLuR1DyHm319hu6dWc',
    authDomain: 'login-13127.firebaseapp.com',
    projectId: 'login-13127',
    storageBucket: 'login-13127.appspot.com',
    messagingSenderId: '151656578300',
    appId: '1:151656578300:web:c67208ab6ec437c844ab79',
    measurementId: 'G-L3PPD58MZ8',
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  //console.log(app);
  const auth = getAuth();

  //----- Logout code start
  document.getElementById('logout').addEventListener('click', function () {
    signOut(auth)
      .then(() => {
        // Sign-out successful.
        console.log('Sign-out successful.');
        alert('Sign-out successful.');
        document.getElementById('logout').style.display = 'none';
      })
      .catch((error) => {
        // An error happened.
        console.log('An error happened.');
      });
  });
  //----- End

  // FORGET and RESET password

  // New code to handle password reset
  document
    .getElementById('forgot_password_link')
    .addEventListener('click', function (event) {
      event.preventDefault(); // Prevent the default action of the link
      const email = document.getElementById('login_email').value;

      // Send password reset email
      sendPasswordResetEmail(auth, email)
        .then(() => {
          // Password reset email sent successfully
          alert('Password reset email sent. Please check your email inbox.');
        })
        .catch((error) => {
          // An error occurred
          console.error('Error sending password reset email:', error.message);
          alert('An error occurred while sending the password reset email.');
        });
    });
</script>

<!---Dark Mode-->
<script>
  function applyDarkModePreferenceOnLoginPage() {
    const isDarkMode = isDarkModePreferred();
    if (isDarkMode) {
      document.body.classList.add('dark-mode');
    } else {
      document.body.classList.remove('dark-mode');
    }
  }

  // Function to check if dark mode preference exists
  function isDarkModePreferred() {
    return JSON.parse(localStorage.getItem('darkMode'));
  }

  // Call the function when the page loads
  document.addEventListener('DOMContentLoaded', function () {
    applyDarkModePreferenceOnLoginPage();
  });
</script>

</html>
